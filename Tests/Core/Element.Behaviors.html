<style>
	#fixture {
		width: 400px;
		height: 250px;
		padding-top: 50px;
		margin: 40px;
		text-align: center;
		font-size: 20px;
		border: solid 1px;
	}
</style>

<div id=fixture data-filter="pulse gray">I should pulse and have a gray background</div>

<script src="/depender/build?require=Element.Behaviors/Element.Behaviors,Core/Fx.Tween"></script>

<script>

Object.append(Element.behaviors, {
	pulse: function(){
		var periodical
		, tween = new Fx.Tween(this, { property: 'opacity', link: 'chain', duration: 2000 })
		, pulse = function(){ tween.start(0).start(1) }
		, start = function(){ pulse(); periodical = pulse.periodical(4000) }
		, stop  = function(){ tween.cancel(); clearInterval(periodical) };
		start();
		return { tween: tween, start: start, stop: stop };
	},
	gray: function(){
		this.setStyle('background', '#ccc');
	}
});

Element.behaviors.filterNow();

</script>
